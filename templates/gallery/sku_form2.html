{% extends "base.html" %}
{% block content %}
    {% load static %}
    <style>
        @import url('rsms.me/inter/inter.css');

        :root {
            --tblr-font-sans-serif: 'Inter Var', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
        }

        body {
            font-feature-settings: "cv03", "cv04", "cv11";
        }
    </style>

    <script src="{% static 'dist/js/demo-theme.min.js' %}"></script>

    <div class="container-xl">
    <div class="page-header d-print-none">
    <!-- Page body -->
    <div class="page-body">
    <div class="container-xl">
        <div class="row row-cards">
            <div class="col-12">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
                            <div class="d-flex">
                                <div>
                                    {% if message.tags == 'error' %}
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon alert-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
                                            <path d="M12 8l0 4"></path>
                                            <path d="M12 16l.01 0"></path>
                                        </svg>
                                    {% else %}
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon alert-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <path d="M5 12l5 5l10 -10"></path>
                                        </svg>
                                    {% endif %}
                                </div>
                                <div>{{ message }}</div>
                            </div>
                            <a class="btn-close" data-bs-dismiss="alert" aria-label="close"></a>
                        </div>
                    {% endfor %}
                {% endif %}

                <form method="post" class="card">
                    {% csrf_token %}

                    <div class="card-header">
                        <h4 class="card-title">新增 SKU</h4>
                    </div>

                    <div class="card-body">
                        <div class="row col-md-12 col-xl-12 g-5">
                            <div class="col-xl-12">

                                <!-- card-body row_1 start  -->
                                <div class="row">
                                    <div class="col-md-12 col-xl-12">

                                        <!-- basic info  -->
                                        <div class="mb-3">
                                            <label class="form-label">基础信息</label>
                                        </div>

                                        <!-- 基础信息输入框 第一行  -->
                                        <div class="row g-2">
                                            <div class="col-md-3">
                                                <div class="mb-3">
                                                    <input type="text" class="form-control {% if form.sku_code.errors %}is-invalid{% endif %}" name="sku_code"
                                                           placeholder="SKU编码" value="{{ generated_sku_code }}" readonly>
                                                    {% if form.sku_code.errors %}
                                                        <div class="invalid-feedback">{{ form.sku_code.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="mb-3">
                                                    <input type="text" class="form-control {% if form.sku_name.errors %}is-invalid{% endif %}" name="sku_name"
                                                           placeholder="SKU名称" required value="{{ form.sku_name.value|default:'' }}" >
                                                    {% if form.sku_name.errors %}
                                                        <div class="invalid-feedback">{{ form.sku_name.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>







                                        <!-- 基础输入框 第二行  -->
                                        <div class="row g-2">
                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <input type="number" step="0.01" class="form-control {% if form.weight.errors %}is-invalid{% endif %}" name="weight"
                                                           placeholder="重量(g)" value="{{ form.weight.value|default:'' }}">
                                                    {% if form.weight.errors %}
                                                        <div class="invalid-feedback">{{ form.weight.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <input type="number" class="form-control {% if form.length.errors %}is-invalid{% endif %}" name="length"
                                                           placeholder="长(mm)" value="{{ form.length.value|default:'' }}">
                                                    {% if form.length.errors %}
                                                        <div class="invalid-feedback">{{ form.length.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <input type="number" class="form-control {% if form.width.errors %}is-invalid{% endif %}" name="width"
                                                           placeholder="宽(mm)" value="{{ form.width.value|default:'' }}">
                                                    {% if form.width.errors %}
                                                        <div class="invalid-feedback">{{ form.width.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <input type="number" class="form-control {% if form.height.errors %}is-invalid{% endif %}" name="height"
                                                           placeholder="高(mm)" value="{{ form.height.value|default:'' }}">
                                                    {% if form.height.errors %}
                                                        <div class="invalid-feedback">{{ form.height.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <input type="text" class="form-control" name="other_dimensions"
                                                           placeholder="其他尺寸" value="{{ form.other_dimensions.value|default:'' }}">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 基础信息输入框 第三行  -->
                                        <div class="row g-2">
                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <select class="form-select {% if form.material.errors %}is-invalid{% endif %}" name="material" required>
                                                        <option value="">选择材质</option>
                                                        <option value="铜" {% if form.material.value == "铜" %}selected{% endif %}>铜</option>
                                                        <option value="铁" {% if form.material.value == "铁" %}selected{% endif %}>铁</option>
                                                        <option value="锌合金" {% if form.material.value == "锌合金" %}selected{% endif %}>锌合金</option>
                                                        <option value="塑料" {% if form.material.value == "塑料" %}selected{% endif %}>塑料</option>
                                                        <option value="其他" {% if form.material.value == "其他" %}selected{% endif %}>其他</option>
                                                    </select>
                                                    {% if form.material.errors %}
                                                        <div class="invalid-feedback">{{ form.material.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <select class="form-select {% if form.color.errors %}is-invalid{% endif %}" name="color" required>
                                                        <option value="">选择颜色</option>
                                                        <option value="金色" {% if form.color.value == "金色" %}selected{% endif %}>金色</option>
                                                        <option value="银色" {% if form.color.value == "银色" %}selected{% endif %}>银色</option>
                                                        <option value="黑色" {% if form.color.value == "黑色" %}selected{% endif %}>黑色</option>
                                                        <option value="白色" {% if form.color.value == "白色" %}selected{% endif %}>白色</option>
                                                        <option value="其他" {% if form.color.value == "其他" %}selected{% endif %}>其他</option>
                                                    </select>
                                                    {% if form.color.errors %}
                                                        <div class="invalid-feedback">{{ form.color.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <select class="form-select {% if form.plating_process.errors %}is-invalid{% endif %}" name="plating_process" required>
                                                        <option value="">电镀工艺</option>
                                                        <option value="none" {% if form.plating_process.value == "none" %}selected{% endif %}>无电镀</option>
                                                        <option value="gold" {% if form.plating_process.value == "gold" %}selected{% endif %}>镀金</option>
                                                        <option value="silver" {% if form.plating_process.value == "silver" %}selected{% endif %}>镀银</option>
                                                        <option value="nickel" {% if form.plating_process.value == "nickel" %}selected{% endif %}>镀镍</option>
                                                        <option value="chrome" {% if form.plating_process.value == "chrome" %}selected{% endif %}>镀铬</option>
                                                        <option value="copper" {% if form.plating_process.value == "copper" %}selected{% endif %}>镀铜</option>
                                                        <option value="other" {% if form.plating_process.value == "other" %}selected{% endif %}>其他</option>
                                                    </select>
                                                    {% if form.plating_process.errors %}
                                                        <div class="invalid-feedback">{{ form.plating_process.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <input type="text" class="form-control" name="surface_treatment"
                                                           placeholder="表面处理" value="{{ form.surface_treatment.value|default:'' }}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- card-body row_2 start  -->
                                <div class="row">
                                    <div class="col-md-12 col-xl-12">
                                        <!-- basic info  -->
                                        <div class="mb-3">
                                            <label class="form-label">SPU信息</label>
                                        </div>

                                        <!-- SPU信息输入框  -->
                                        <div class="row g-12">
                                            <div class="col-md-12">

                                                <div class="mb-3">

                                                    <div class="form-selectgroup">
                                                        <label class="form-selectgroup-item">
                                                            <input type="radio" name="icons" value="home"
                                                                   class="form-selectgroup-input" checked>
                                                            <span class="form-selectgroup-label">引用现有SPU</span>
                                                        </label>
                                                        <label class="form-selectgroup-item">
                                                            <input type="radio" name="icons" value="user"
                                                                   class="form-selectgroup-input">
                                                            <span class="form-selectgroup-label">直接新建SPU</span>
                                                        </label>

                                                    </div>
                                                </div>


                                            </div>
                                        </div>


                                        <div class="row g-2">




                                            <div class="col-md-2">
                                                <div class="mb-3">
                                                    <select class="form-select {% if form.category.errors %}is-invalid{% endif %}" name="category" required>
                                                        <option value="">选择类目</option>
                                                        {% for category in categories %}
                                                            <option value="{{ category.id }}" {% if form.category.value|stringformat:"s" == category.id|stringformat:"s" %}selected{% endif %}>
                                                                {{ category.category_name_zh }} {% if category.category_name_en %}({{ category.category_name_en }}){% endif %}
                                                            </option>
                                                        {% endfor %}
                                                    </select>
                                                    {% if form.category.errors %}
                                                        <div class="invalid-feedback">{{ form.category.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col-md-2">

                                                <div class="mb-3">
                                                    <select class="form-select {% if form.spu.errors %}is-invalid{% endif %}" name="spu" required>
                                                        <option value="">选择SPU</option>
                                                        {% for spu in spus %}
                                                            <option value="{{ spu.id }}" {% if form.spu.value|stringformat:"s" == spu.id|stringformat:"s" %}selected{% endif %}>
                                                                {{ spu.spu_code }} - {{ spu.spu_name }}
                                                            </option>
                                                        {% endfor %}
                                                    </select>
                                                    {% if form.spu.errors %}
                                                        <div class="invalid-feedback">{{ form.spu.errors.0 }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>





                                    </div>
                                </div>

                                <!-- card-body row_3 start  -->
                                <div class="row">
                                    <div class="col-md-12 col-xl-12">
                                        <!-- spu info  -->
                                        <div class="mb-3">
                                            <label class="form-label">供应商信息</label>
                                        </div>

                                        <div class="mb-3">
                                            <textarea class="form-control {% if form.suppliers_list.errors %}is-invalid{% endif %}" name="suppliers_list" rows="3"
                                                    placeholder="供应商信息 (JSON格式)">{{ form.suppliers_list.value|default:'' }}</textarea>
                                            {% if form.suppliers_list.errors %}
                                                <div class="invalid-feedback">{{ form.suppliers_list.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card-footer text-end">
                        <div class="d-flex">
                            <button type="submit" class="btn btn-primary">保存</button>
                            <a href="{% url 'gallery:sku_list' %}" class="btn btn-link">返回</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
